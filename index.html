<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Landing Page Supervisor</title>
    <!-- Memuat Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Konfigurasi Font Inter -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        /* Custom scrollbar style for the employee list */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #d1d5db;
            border-radius: 10px;
        }
    </style>
    <!-- Menghapus blok script type="module" untuk otentikasi Firebase -->
</head>
<body class="min-h-screen p-4 sm:p-8">

    <!-- Loading Overlay dihapus/disembunyikan sepenuhnya -->
    
    <div class="max-w-4xl mx-auto bg-white p-6 md:p-10 rounded-2xl shadow-xl">
        <h1 class="text-3xl font-bold text-indigo-700 mb-6 border-b pb-4">Landing Page Supervisor (Mode Dev)</h1>
        
        <!-- Informasi Supervisor & App ID (Menggunakan nilai statis) -->
        <div class="text-sm text-gray-500 mb-6 bg-indigo-50 p-3 rounded-lg">
            <p>ID Supervisor: <span id="supervisor-id" class="font-mono text-indigo-600">DEV_MODE</span></p>
            <p>ID Aplikasi: <span id="app-id-display" class="font-mono text-indigo-600 text-xs">Loading...</span></p>
        </div>

        <!-- Bagian Pemilihan Tim dan Karyawan -->
        <div id="employee-selection-section" class="space-y-6 mb-8 p-6 border border-gray-200 rounded-xl">
            <h2 class="text-xl font-semibold text-gray-800">1. Pilih Karyawan</h2>
            
            <!-- Pemilihan Tim -->
            <div>
                <label for="team-select" class="block text-sm font-medium text-gray-700 mb-1">Pilih Tim</label>
                <select id="team-select" onchange="window.supervisorApp.selectTeam(this.value)" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md shadow-sm">
                    <option value="" disabled selected>-- Pilih Tim --</option>
                    <option value="Red">Red</option>
                    <option value="White">White</option>
                </select>
            </div>
            
            <!-- Pemilihan Karyawan (Tergantung Tim) -->
            <div id="employee-lookup-container" class="hidden space-y-3">
                <label for="employee-search" class="block text-sm font-medium text-gray-700">Cari Nama Karyawan (Nama / NRK)</label>
                <input type="text" id="employee-search" oninput="window.supervisorApp.filterEmployees(this.value)" placeholder="Cari..." class="block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                
                <div id="employee-list-container" class="border border-gray-200 rounded-lg p-3 custom-scrollbar max-h-[120px] overflow-y-auto bg-gray-50">
                    <p class="text-sm text-gray-500" id="employee-list-message">Silakan pilih Tim terlebih dahulu.</p>
                    <ul id="employee-list" class="space-y-1">
                        <!-- Employee list will be rendered here -->
                    </ul>
                </div>
                
                <button id="show-more-btn" onclick="window.supervisorApp.toggleShowAllEmployees()" class="hidden text-indigo-600 hover:text-indigo-800 text-sm font-medium mt-1">
                    Lebih banyak...
                </button>
            </div>

             <!-- Karyawan yang Dipilih -->
            <div id="selected-employee-info" class="p-3 bg-indigo-100 border border-indigo-300 rounded-lg hidden">
                <p class="text-sm font-semibold text-indigo-700">Karyawan Dipilih:</p>
                <p class="text-lg font-bold text-indigo-900"><span id="selected-name"></span> (<span id="selected-nrk"></span>)</p>
                <button onclick="window.supervisorApp.resetEmployeeSelection()" class="text-xs text-red-500 hover:text-red-700 mt-1">Ubah Pilihan</button>
            </div>
        </div>

        <!-- Bagian Pemilihan Halaman Tujuan -->
        <div id="page-selection-section" class="space-y-4 p-6 bg-indigo-50 border border-indigo-200 rounded-xl">
            <h2 class="text-xl font-semibold text-gray-800">2. Pilih Halaman Tujuan</h2>
            <p class="text-sm text-gray-600">Pilih salah satu fungsi di bawah ini untuk Karyawan yang telah dipilih.</p>
            <div class="flex flex-col space-y-4 md:flex-row md:space-y-0 md:space-x-4">
                <button onclick="window.supervisorApp.selectPage('kelayakan')" id="btn-kelayakan" class="flex-1 bg-indigo-600 text-white font-semibold py-3 px-4 rounded-xl shadow-md hover:bg-indigo-700 transition duration-300 disabled:opacity-50" disabled>
                    <span class="text-2xl">üìù</span> Form Kelayakan Kerja
                </button>
                <button onclick="window.supervisorApp.selectPage('sakit')" id="btn-sakit" class="flex-1 bg-indigo-600 text-white font-semibold py-3 px-4 rounded-xl shadow-md hover:bg-indigo-700 transition duration-300 disabled:opacity-50" disabled>
                    <span class="text-2xl">ü§í</span> Form Ijin Sakit & Upload Surat
                </button>
            </div>
        </div>

        <!-- Formulir Kelayakan Kerja (Page 1) -->
        <div id="page-kelayakan" class="mt-8 hidden p-6 border border-indigo-300 rounded-xl bg-white shadow-lg">
            <h2 class="text-2xl font-bold text-indigo-700 mb-4">Form Kelayakan Kerja Karyawan</h2>
            <p class="text-sm text-gray-600 mb-6">Supervisor: Isi 12 pertanyaan kesiapan karyawan untuk hari ini.</p>
            <form id="form-kelayakan" onsubmit="window.supervisorApp.submitForm('kelayakan', event)" class="space-y-5">
                <!-- 12 Pertanyaan Kelayakan (Skala 1-5, 1=Tidak Siap, 5=Sangat Siap) -->
                <div id="kelayakan-questions" class="space-y-4">
                    <p class="font-semibold text-gray-700 border-b pb-2">Nilai kesiapan karyawan (1: Tidak Siap, 5: Sangat Siap)</p>
                    
                    <div data-question="Fisik">
                        <label class="block text-sm font-medium text-gray-700 mb-2">1. Bagaimana kondisi fisik karyawan saat ini?</label>
                        <input type="range" min="1" max="5" value="3" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer range-lg" data-target="Fisik">
                        <div class="flex justify-between text-xs text-gray-500"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span></div>
                    </div>
                    
                    <div data-question="Mental">
                        <label class="block text-sm font-medium text-gray-700 mb-2">2. Bagaimana fokus dan kesiapan mental karyawan?</label>
                        <input type="range" min="1" max="5" value="3" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer range-lg" data-target="Mental">
                        <div class="flex justify-between text-xs text-gray-500"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span></div>
                    </div>
                    
                    <div data-question="Alat">
                        <label class="block text-sm font-medium text-gray-700 mb-2">3. Apakah karyawan memiliki semua alat kerja yang dibutuhkan?</label>
                        <input type="range" min="1" max="5" value="5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer range-lg" data-target="Alat">
                        <div class="flex justify-between text-xs text-gray-500"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span></div>
                    </div>

                     <div data-question="Pengetahuan">
                        <label class="block text-sm font-medium text-gray-700 mb-2">4. Apakah karyawan memahami tugas yang akan dikerjakan hari ini?</label>
                        <input type="range" min="1" max="5" value="3" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer range-lg" data-target="Pengetahuan">
                        <div class="flex justify-between text-xs text-gray-500"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span></div>
                    </div>

                     <div data-question="Prosedur">
                        <label class="block text-sm font-medium text-gray-700 mb-2">5. Seberapa patuh karyawan terhadap prosedur keamanan kerja?</label>
                        <input type="range" min="1" max="5" value="4" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer range-lg" data-target="Prosedur">
                        <div class="flex justify-between text-xs text-gray-500"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span></div>
                    </div>

                     <div data-question="Lingkungan">
                        <label class="block text-sm font-medium text-gray-700 mb-2">6. Apakah lingkungan kerja kondusif untuk karyawan?</label>
                        <input type="range" min="1" max="5" value="3" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer range-lg" data-target="Lingkungan">
                        <div class="flex justify-between text-xs text-gray-500"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span></div>
                    </div>

                    <div data-question="Sikap">
                        <label class="block text-sm font-medium text-gray-700 mb-2">7. Bagaimana sikap dan motivasi kerja karyawan hari ini?</label>
                        <input type="range" min="1" max="5" value="3" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer range-lg" data-target="Sikap">
                        <div class="flex justify-between text-xs text-gray-500"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span></div>
                    </div>

                    <div data-question="Istirahat">
                        <label class="block text-sm font-medium text-gray-700 mb-2">8. Apakah karyawan cukup beristirahat?</label>
                        <input type="range" min="1" max="5" value="3" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer range-lg" data-target="Istirahat">
                        <div class="flex justify-between text-xs text-gray-500"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span></div>
                    </div>

                    <div data-question="Komunikasi">
                        <label class="block text-sm font-medium text-gray-700 mb-2">9. Seberapa baik komunikasi dengan karyawan saat ini?</label>
                        <input type="range" min="1" max="5" value="4" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer range-lg" data-target="Komunikasi">
                        <div class="flex justify-between text-xs text-gray-500"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span></div>
                    </div>

                    <div data-question="Emosi">
                        <label class="block text-sm font-medium text-gray-700 mb-2">10. Apakah karyawan menunjukkan tanda-tanda emosi negatif (marah, cemas)?</label>
                        <input type="range" min="1" max="5" value="5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer range-lg" data-target="Emosi">
                        <div class="flex justify-between text-xs text-gray-500"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span></div>
                    </div>

                    <div data-question="Keluarga">
                        <label class="block text-sm font-medium text-gray-700 mb-2">11. Apakah ada isu keluarga/pribadi yang berpotensi mengganggu kerja?</label>
                        <input type="range" min="1" max="5" value="5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer range-lg" data-target="Keluarga">
                        <div class="flex justify-between text-xs text-gray-500"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span></div>
                    </div>

                    <div data-question="Kesehatan">
                        <label class="block text-sm font-medium text-gray-700 mb-2">12. Apakah karyawan melaporkan keluhan kesehatan ringan?</label>
                        <input type="range" min="1" max="5" value="5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer range-lg" data-target="Kesehatan">
                        <div class="flex justify-between text-xs text-gray-500"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span></div>
                    </div>
                </div>
                
                <button type="submit" class="w-full bg-green-600 text-white font-bold py-3 px-4 rounded-xl shadow-lg hover:bg-green-700 transition duration-300">
                    Kirim Data Kelayakan Kerja
                </button>
            </form>
        </div>

        <!-- Formulir Ijin Sakit (Page 2) -->
        <div id="page-sakit" class="mt-8 hidden p-6 border border-indigo-300 rounded-xl bg-white shadow-lg">
            <h2 class="text-2xl font-bold text-indigo-700 mb-4">Form Ijin Sakit & Upload Surat</h2>
            <p class="text-sm text-gray-600 mb-6">Supervisor: Pilih tanggal sakit dan upload surat sakit karyawan.</p>
            <form id="form-sakit" onsubmit="window.supervisorApp.submitForm('sakit', event)" class="space-y-5">
                
                <div>
                    <label for="sick-date" class="block text-sm font-medium text-gray-700 mb-1">Tanggal Ijin Sakit</label>
                    <input type="date" id="sick-date" required class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                </div>

                <div>
                    <label for="sick-note-file" class="block text-sm font-medium text-gray-700 mb-1">Upload Surat Sakit (Dokter/Klinik)</label>
                    <input type="file" id="sick-note-file" accept=".pdf,.jpg,.png" class="mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100">
                    <p class="text-xs text-gray-500 mt-1">Catatan: Karena keterbatasan lingkungan, hanya nama file yang akan disimpan, bukan file sebenarnya.</p>
                </div>
                
                <button type="submit" class="w-full bg-red-600 text-white font-bold py-3 px-4 rounded-xl shadow-lg hover:bg-red-700 transition duration-300">
                    Kirim Data Ijin Sakit
                </button>
            </form>
        </div>

        <!-- Message Box for Confirmation/Error (Using Modal/Toast pattern) -->
        <div id="message-box" class="fixed bottom-4 right-4 bg-green-500 text-white p-4 rounded-lg shadow-xl hidden transition-all duration-300 ease-out z-50 max-w-sm">
            <p id="message-text" class="font-semibold"></p>
            <button onclick="document.getElementById('message-box').classList.add('hidden')" class="ml-4 text-sm font-medium hover:text-gray-100">Tutup</button>
        </div>

    </div>

    <script type="text/javascript">
        // Global State and Logic
        window.supervisorApp = (function() {
            // Statis karena otentikasi dinonaktifkan
            let supervisorId = 'DEV_MODE'; 
            let selectedTeam = '';
            let selectedEmployee = null; // { name: '...', nrk: '...' }
            let currentFilter = '';
            let showAllEmployees = false;
            
            // --- Mock Employee Data (Database MP) ---
            const employeeDatabase = {
                'Red': [
                    { name: 'Bambang Sudarsono', nrk: 'R1001' },
                    { name: 'Siti Nurhaliza', nrk: 'R1002' },
                    { name: 'Joko Widodo', nrk: 'R1003' },
                    { name: 'Ayu Tingting', nrk: 'R1004' },
                    { name: 'Denny Sumargo', nrk: 'R1005' },
                    { name: 'Raisa Andriana', nrk: 'R1006' },
                    { name: 'Tulus Pamungkas', nrk: 'R1007' },
                ],
                'White': [
                    { name: 'Michael Jordan', nrk: 'W2001' },
                    { name: 'LeBron James', nrk: 'W2002' },
                    { name: 'Kobe Bryant', nrk: 'W2003' },
                    { name: 'Stephen Curry', nrk: 'W2004' },
                    { name: 'Kevin Durant', nrk: 'W2005' },
                    { name: 'Shaquille O\'Neal', nrk: 'W2006' },
                ]
            };
            
            // --- DOM Elements ---
            const $employeeLookupContainer = document.getElementById('employee-lookup-container');
            const $employeeList = document.getElementById('employee-list');
            const $employeeListMessage = document.getElementById('employee-list-message');
            const $employeeSearch = document.getElementById('employee-search');
            const $showMoreBtn = document.getElementById('show-more-btn');
            const $selectedEmployeeInfo = document.getElementById('selected-employee-info');
            const $selectedName = document.getElementById('selected-name');
            const $selectedNRK = document.getElementById('selected-nrk');
            const $btnKelayakan = document.getElementById('btn-kelayakan');
            const $btnSakit = document.getElementById('btn-sakit');
            const $pageKelayakan = document.getElementById('page-kelayakan');
            const $pageSakit = document.getElementById('page-sakit');
            const $messageBox = document.getElementById('message-box');
            const $messageText = document.getElementById('message-text');

            // --- Helper Functions ---

            function showMessage(text, isError = false) {
                $messageText.innerText = text;
                $messageBox.classList.remove('hidden');
                $messageBox.classList.remove('bg-green-500', 'bg-red-500');
                $messageBox.classList.add(isError ? 'bg-red-500' : 'bg-green-500');
                setTimeout(() => {
                    $messageBox.classList.add('hidden');
                }, 5000);
            }

            function updateButtonsState() {
                const isDisabled = !selectedEmployee;
                $btnKelayakan.disabled = isDisabled;
                $btnSakit.disabled = isDisabled;
            }

            function hideAllPages() {
                $pageKelayakan.classList.add('hidden');
                $pageSakit.classList.add('hidden');
            }

            // Fungsi setSupervisorId dinonaktifkan
            // function setSupervisorId(id) { supervisorId = id; } 

            function resetEmployeeSelection() {
                selectedEmployee = null;
                selectedTeam = '';
                document.getElementById('team-select').value = '';
                $employeeSearch.value = '';
                $employeeLookupContainer.classList.add('hidden');
                $selectedEmployeeInfo.classList.add('hidden');
                hideAllPages();
                updateButtonsState();
                renderEmployeeList(); // Clear list
                showMessage('Pilihan karyawan direset.', true);
            }

            function renderEmployeeList() {
                if (!selectedTeam) {
                    $employeeListMessage.classList.remove('hidden');
                    $employeeListMessage.innerText = 'Silakan pilih Tim terlebih dahulu.';
                    $employeeList.innerHTML = '';
                    $showMoreBtn.classList.add('hidden');
                    return;
                }

                $employeeListMessage.classList.add('hidden');
                const teamData = employeeDatabase[selectedTeam] || [];
                const searchLower = currentFilter.toLowerCase();
                
                // 1. Filter based on search input
                const filteredEmployees = teamData.filter(emp => 
                    emp.name.toLowerCase().includes(searchLower) || 
                    emp.nrk.toLowerCase().includes(searchLower)
                );

                const listToShow = (showAllEmployees || filteredEmployees.length <= 3) 
                    ? filteredEmployees 
                    : filteredEmployees.slice(0, 3);
                
                // 2. Render the list
                $employeeList.innerHTML = '';
                if (filteredEmployees.length === 0) {
                    $employeeListMessage.classList.remove('hidden');
                    $employeeListMessage.innerText = 'Tidak ada karyawan yang ditemukan.';
                }

                listToShow.forEach(emp => {
                    const li = document.createElement('li');
                    li.className = 'p-2 rounded-md hover:bg-indigo-100 cursor-pointer text-sm text-gray-800 transition duration-150';
                    li.innerHTML = `<span class="font-medium">${emp.name}</span> <span class="text-gray-500">(${emp.nrk})</span>`;
                    li.onclick = () => selectEmployee(emp);
                    $employeeList.appendChild(li);
                });

                // 3. Handle 'More...' button
                if (filteredEmployees.length > 3) {
                    $showMoreBtn.classList.remove('hidden');
                    $showMoreBtn.innerText = showAllEmployees ? 'Sembunyikan' : `Lebih banyak... (${filteredEmployees.length - 3} lainnya)`;
                } else {
                    $showMoreBtn.classList.add('hidden');
                }
            }

            function selectTeam(team) {
                selectedTeam = team;
                selectedEmployee = null;
                currentFilter = '';
                $employeeSearch.value = '';
                $selectedEmployeeInfo.classList.add('hidden');
                hideAllPages();
                updateButtonsState();
                
                if (team) {
                    $employeeLookupContainer.classList.remove('hidden');
                    renderEmployeeList();
                    showMessage(`Tim ${team} dipilih. Silakan pilih Karyawan.`);
                } else {
                    $employeeLookupContainer.classList.add('hidden');
                }
            }

            function filterEmployees(query) {
                currentFilter = query;
                showAllEmployees = false;
                renderEmployeeList();
            }

            function toggleShowAllEmployees() {
                showAllEmployees = !showAllEmployees;
                renderEmployeeList();
            }

            function selectEmployee(emp) {
                selectedEmployee = emp;
                $selectedName.innerText = emp.name;
                $selectedNRK.innerText = emp.nrk;
                $selectedEmployeeInfo.classList.remove('hidden');
                $employeeLookupContainer.classList.add('hidden'); // Hide lookup after selection
                updateButtonsState();
                showMessage(`Karyawan ${emp.name} (${emp.nrk}) dipilih. Sekarang, pilih Halaman Tujuan.`);
            }

            function selectPage(page) {
                if (!selectedEmployee) {
                    showMessage('Harap pilih karyawan terlebih dahulu.', true);
                    return;
                }
                
                hideAllPages();
                if (page === 'kelayakan') {
                    $pageKelayakan.classList.remove('hidden');
                    showMessage('Mengisi Form Kelayakan Kerja.', false);
                } else if (page === 'sakit') {
                    $pageSakit.classList.remove('hidden');
                    showMessage('Mengisi Form Ijin Sakit.', false);
                }
            }

            async function saveToGoogleSheet(sheetName, data) {
                // --- SIMULASI PENYIMPANAN KE GOOGLE SHEET ---
                console.log(`[SIMULASI GSheet] Menyimpan ke Sheet: ${sheetName}`);
                console.log("Data yang akan disimpan:", data);
                
                // Simulasikan penundaan jaringan
                await new Promise(resolve => setTimeout(resolve, 1000)); 

                showMessage(`Data berhasil disimulasikan dan dicatat ke konsol untuk Sheet '${sheetName}'!`);
            }

            async function submitForm(type, event) {
                event.preventDefault();
                
                if (!selectedEmployee) {
                    showMessage('Error: Pemilihan karyawan belum selesai.', true);
                    return;
                }

                const commonData = {
                    timestamp: new Date().toISOString(),
                    // supervisorId menggunakan nilai statis 'DEV_MODE'
                    supervisorId: supervisorId, 
                    team: selectedTeam,
                    employeeName: selectedEmployee.name,
                    employeeNRK: selectedEmployee.nrk,
                };

                let sheetName = '';
                let formData = {};

                if (type === 'kelayakan') {
                    sheetName = 'Form Kelayakan';
                    
                    const questions = Array.from(document.querySelectorAll('#kelayakan-questions div[data-question]'));
                    questions.forEach(qDiv => {
                        const qName = qDiv.getAttribute('data-question');
                        const qValue = qDiv.querySelector('input[type="range"]').value;
                        formData[`Kelayakan - ${qName}`] = parseInt(qValue);
                    });
                    
                } else if (type === 'sakit') {
                    sheetName = 'Ijin Sakit';
                    const dateInput = document.getElementById('sick-date').value;
                    const fileInput = document.getElementById('sick-note-file');
                    
                    if (!dateInput) {
                        showMessage('Harap masukkan Tanggal Ijin Sakit.', true);
                        return;
                    }

                    formData = {
                        tanggalSakit: dateInput,
                        suratSakitFile: fileInput.files.length > 0 ? fileInput.files[0].name : 'Tidak Ada File Diupload',
                    };
                }

                const finalData = { ...commonData, ...formData };
                
                await saveToGoogleSheet(sheetName, finalData);
                
                // Setelah berhasil, reset formulir dan kembali ke pemilihan halaman
                document.getElementById(`form-${type}`).reset();
                hideAllPages();
                resetEmployeeSelection(); // Reset total setelah submit berhasil
            }

            // Initial rendering
            document.addEventListener('DOMContentLoaded', () => {
                // Set App ID statis
                const appId = 'supervisor-app-dev';
                document.getElementById('app-id-display').innerText = appId;
                
                renderEmployeeList();
                updateButtonsState();
                
                // Set today's date as default for sick leave (for convenience)
                const today = new Date().toISOString().split('T')[0];
                document.getElementById('sick-date').value = today;

            });


            // Expose public methods
            return {
                // setSupervisorId dinonaktifkan
                selectTeam,
                filterEmployees,
                toggleShowAllEmployees,
                selectEmployee,
                resetEmployeeSelection,
                selectPage,
                submitForm
            };
        })();
    </script>
</body>
</html>
